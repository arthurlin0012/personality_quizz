<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Space Sailor's Quiz ⚓</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body,
    html {
      width: 100%;
      height: 100%;
    }

    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(270deg, #003973, #E5E5BE, #003973);
      background-size: 600% 600%;
      animation: gradientBG 20s ease infinite;
    }

    @keyframes gradientBG {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    .full-width-section {
      width: 100%;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 0;
    }

    .quiz-container,
    .result,
    #loadingScreen {
      width: 100%;
      max-width: 800px;
      background: rgba(255, 255, 255, 0.35);
      padding: 30px 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    .quiz-container img,
    .result img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
    }

    .result img {
      max-width: 80%;
    }

    .question {
      display: none;
    }

    .question.active {
      display: block;
    }

    h2 {
      text-align: center;
      margin-bottom: 30px;
    }

    label {
      display: block;
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      background-color: #e9ecef;
      margin-top: 10px;
      cursor: pointer;
      text-align: center;
    }

    label:hover {
      background-color: #dee2e6;
    }

    .progress {
      height: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      background-color: #dee2e6;
      overflow: hidden;
      width: 100%;
      /* Ensure progress bar width matches the parent container */
      max-width: 800px;
      /* Match the maximum width of quiz container */
    }

    .progress-bar {
      transition: width 0.4s ease-in-out;
    }

    .custom-progress {
      background-color: #003973;
    }

    .loading {
      font-size: 1.5rem;
      text-align: center;
    }

    .result-title {
      font-size: 2rem;
      font-weight: bold;
      color: #003973;
      margin-bottom: 15px;
    }

    .fun-fact {
      font-size: 1.1rem;
      font-style: italic;
      color: #555;
    }

    @media (max-width: 768px) {

      .quiz-container,
      .result {
        padding: 20px 10px;
      }

      h2 {
        font-size: 1.5rem;
      }

      .lead {
        font-size: 1rem;
      }
    }
  </style>
</head>

<body>

  <div class="full-width-section">

    <!-- Start Screen -->
    <div id="startScreen" class="quiz-container text-center">
      <h2>🌌 Welcome to the Ocean Explorer Quiz 🌊</h2>
      <img src="creatures.png" class="mb-3">
      <p>Embark on a fun personality journey across the deep seas!</p>
      <button id="startBtn" class="btn" style="background-color: #003973; color: white;">Start Quiz</button>
    </div>

    <!-- Quiz Section -->
    <div id="quizSection" class="d-none w-100 d-flex flex-column align-items-center">
      <h2>⚓🌊 Ocean Exploration ⚓🌊</h2>

      <!-- Moved the progress bar inside quiz-container -->

      <div class="progress mb-3">
        <div id="progressBar" class="progress-bar custom-progress" role="progressbar" style="width: 0%"></div>
      </div>

      <form id="surveyForm" class="quiz-container text-center">

        <div class="question active">
          <p>1. What is your favorite color?</p>
          <div class="row">
            <div class="col-6">
              <img src="q1-option1 - coral reef.png" alt="Red">
              <label><input type="radio" name="q1" value="Red"> Red</label>
            </div>
            <div class="col-6">
              <img src="q1-option2 - shipwreck.png" alt="Blue">
              <label><input type="radio" name="q1" value="Blue"> Blue</label>
            </div>
          </div>
        </div>

        <div class="question">
          <p>2. What is your preferred pet?</p>
          <div class="row">
            <div class="col-6">
              <img src="q2-option1 - jellyfish.png" alt="Dog">
              <label><input type="radio" name="q2" value="Dog"> Dog</label>
            </div>
            <div class="col-6">
              <img src="q2-option2 - fish.png" alt="Cat">
              <label><input type="radio" name="q2" value="Cat"> Cat</label>
            </div>
          </div>
        </div>

        <div class="question">
          <p>3. Which season do you like most?</p>
          <div class="row">
            <div class="col-6">
              <img src="q3-option1 - seaweed.png" alt="Spring">
              <label><input type="radio" name="q3" value="Spring"> Spring</label>
            </div>
            <div class="col-6">
              <img src="q3-option2 - seamount.png" alt="Summer">
              <label><input type="radio" name="q3" value="Summer"> Summer</label>
            </div>
          </div>
        </div>

        <div class="question">
          <p>4. What is your favorite genre of music?</p>
          <div class="row">
            <div class="col-6">
              <img src="q4-option1 - cave.png" alt="Pop">
              <label><input type="radio" name="q4" value="Pop"> Pop</label>
            </div>
            <div class="col-6">
              <img src="q4-option2 - ridge.png" alt="Rock">
              <label><input type="radio" name="q4" value="Rock"> Rock</label>
            </div>
          </div>
        </div>

      </form>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="quiz-container text-center d-none">
      <div class="loading">
        <p>🧠 Calculating your result...</p>
        <div class="spinner-border text-info" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <img id="shadowImage" alt="Shadow Image" class="mb-3">
      </div>
    </div>

    <!-- Result Screen -->
    <div id="result" class="result text-center d-none">
      <div class="result-title" id="resultTitle">You are a mysterious creature!</div>
      <img id="resultImg" src="blank.jpg" alt="Result Image" class="mb-3">
      <p class="fun-fact" id="funFact">Here comes a cool fact!</p>
    </div>

  </div>

  <!-- Sounds -->
  <audio id="nextSound" src="bubble.mp3" preload="auto"></audio>
  <audio id="finishSound" src="finish.mp3" preload="auto"></audio>

  <!-- Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <!-- Script Logic -->
  <script>
    const form = document.getElementById('surveyForm');
    const resultDiv = document.getElementById('result');
    const resultImg = document.getElementById('resultImg');
    const resultTitle = document.getElementById('resultTitle');
    const funFact = document.getElementById('funFact');
    const questions = document.querySelectorAll('.question');
    const progressBar = document.getElementById('progressBar');
    const nextSound = document.getElementById('nextSound');
    const finishSound = document.getElementById('finishSound');
    const startBtn = document.getElementById('startBtn');
    const startScreen = document.getElementById('startScreen');
    const quizSection = document.getElementById('quizSection');
    const loadingScreen = document.getElementById('loadingScreen');
    const shadowImage = document.getElementById('shadowImage');

    let currentQuestion = 0;
    const totalQuestions = questions.length;

    const results = [
      {
        shadow: "angelfish1.png",
        img: "angelfish.png",
        title: "Angelfish 🌈",
        fact: "Known for their grace and vibrant colors, angelfish love to shine in coral reefs."
      },
      {
        shadow: "crab1.png",
        img: "crab.png",
        title: "Crab 🦀",
        fact: "Crabs walk sideways and have a tough shell to protect their curious personalities."
      },
      {
        shadow: "eel1.png",
        img: "eel.png",
        title: "Eel ⚡",
        fact: "Electric eels can produce shocks up to 600 volts. That's shocking curiosity!"
      },
      {
        shadow: "octo1.png",
        img: "octo.png",
        title: "Octopus 🐙",
        fact: "Octopuses have 9 brains and can open jars—true problem solvers of the deep."
      }
    ];

    function updateProgress() {
      const percent = Math.round((currentQuestion / totalQuestions) * 100);
      progressBar.style.width = percent + "%";
    }

    startBtn.addEventListener('click', () => {
      startScreen.classList.add('d-none');
      quizSection.classList.remove('d-none');
      updateProgress();
    });

    form.querySelectorAll('input[type="radio"]').forEach(radio => {
      radio.addEventListener('click', () => {
        nextSound.play();
        if (currentQuestion < totalQuestions - 1) {
          questions[currentQuestion].classList.remove('active');
          currentQuestion++;
          questions[currentQuestion].classList.add('active');
          updateProgress();
        } else {
          updateProgress();
          showLoadingThenResult();
        }
      });
    });

    function showLoadingThenResult() {
      form.style.display = 'none';
      quizSection.classList.add('d-none');
      loadingScreen.classList.remove('d-none');

      const selected = results[Math.floor(Math.random() * results.length)];
      shadowImage.src = selected.shadow;

      setTimeout(() => {
        resultImg.src = selected.img;
        resultTitle.textContent = selected.title;
        funFact.textContent = selected.fact;

        loadingScreen.classList.add('d-none');
        finishSound.play();
        resultDiv.classList.remove('d-none');
        progressBar.style.width = '100%';

        confetti();
      }, 3000);
    }

    updateProgress();
  </script>

</body>

</html>